@use "sass:math";
@use "sass:color";

// ---------------- VARIABLES ----------------
$color-header: #0a5bb8;      // bleu cinéma
$color-menu: #2c2c2c;        // gris foncé
$color-content: #121212;     // noir charbon
$color-footer: #f2c94c;      // jaune or
$color-footer-hover: #ffffff; 
$color-header-hover: color.adjust($color-header, $lightness: 15%);
$color-menu-text: #ffffff;
$color-footer-text: #1c1c1e;
$color-label-bg: rgba(0,0,0,0.85);

$gap: 1rem;
$tile-radius: 0.5rem;
$tile-aspect-ratio: math.div(3, 4);

// ---------------- MIXINS ----------------
@mixin flex-center($direction: row, $justify: center, $align: center) {
  display: flex;
  flex-direction: $direction;
  justify-content: $justify;
  align-items: $align;
}

@mixin transition($property: all, $duration: 0.4s, $ease: ease-out) {
  transition: $property $duration $ease;
}

// ---------------- GRID ----------------
.grid {
  display: grid;
  grid-template-columns: 14rem 1fr;
  grid-template-rows: auto 1fr auto;
  grid-template-areas:
    "header header"
    "menu content"
    "footer footer";
  height: 100vh;
  overflow: hidden;
}

// ---------------- HEADER ----------------
.header {
  grid-area: header;
  background: $color-header;
  color: $color-footer-text;
  @include flex-center(row, center, center);
  font-weight: 700;
  position: sticky;
  top: 0;
  z-index: 10;
  text-align: center;
  font-size: clamp(1.5rem, 2vw, 2rem);
  padding: $gap * 1.5;
  @include transition(all);

  &:hover {
    background: color.adjust($color-header, $lightness: 10%);
    transform: scale(1.02);
    text-shadow: 0.125rem 0.125rem 0.5rem rgba(255,255,255,0.4);
  }

  h2 {
    margin: 0;
    @include transition(all);
    &:hover {
      letter-spacing: 0.125rem;
      text-shadow: 0.188rem 0.188rem 0.75rem rgba(255,255,255,0.5);
    }
  }
}

// ---------------- MENU ----------------
.menu {
  grid-area: menu;
  background: $color-menu;
  padding: $gap;
  position: sticky;
  top: 0;
  height: calc(100vh - 3rem);
  overflow-y: auto;

  ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: $gap * 0.75;
  }

  a {
    @include flex-center(row, flex-start, center);
    gap: $gap * 0.75;
    color: $color-menu-text;
    text-decoration: none;
    font-weight: 600;
    @include transition(all);

    img {
      width: 3rem;
      height: 3rem;
      object-fit: contain;
      border-radius: $tile-radius;
      @include transition(all);
    }

    &:hover {
      color: $color-header-hover;
      transform: scale(1.05);
      img { filter: brightness(1.2); }
    }
  }
}

// ---------------- CONTENT ----------------
.content {
  grid-area: content;
  background: $color-content;
  padding: $gap;
  overflow-y: auto;
  padding-bottom: $gap * 8; // ajusté en responsive
}

// ---------------- TUILES ----------------
.tiles {
  display: flex;
  flex-wrap: wrap;
  gap: $gap;
  align-items: flex-start;
  justify-content: flex-start;

  .tile {
    flex: 1 1 calc(25% - #{$gap});
    aspect-ratio: $tile-aspect-ratio;
    background-image: url("../../img/sprite_grid.jpg");
    background-size: 400% 300%;
    background-repeat: no-repeat;
    border-radius: $tile-radius;
    overflow: hidden;
    position: relative;
    cursor: pointer;
    display: block;
    color: inherit;
    text-decoration: none;
    @include transition(all);

    &:hover {
      transform: scale(1.08);
      box-shadow: 0 0.75rem 1.5rem rgba(0,0,0,0.6);
      z-index: 2;
    }

    &::after {
      content: '';
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.25);
      opacity: 0;
      @include transition(opacity);
    }
    &:hover::after { opacity: 1; }

    &::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 40%;
      background: linear-gradient(to top, rgba(0,0,0,0.85), rgba(0,0,0,0));
      pointer-events: none;
    }

    .label {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: $gap * 0.5 $gap * 0.75;
      color: #ffffff;
      font-size: 0.95rem;
      text-align: center;
      background: $color-label-bg;
      text-shadow: 0 0 0.25rem rgba(0,0,0,0.9), 0 0 0.5rem rgba(0,0,0,0.7);
    }
  }
}

// ---------------- POSITIONS SPRITE ----------------
.p1  { background-position: 33.33% 100%; }
.p2  { background-position: 0% 100%; }
.p3  { background-position: 33.33% 50%; }
.p4  { background-position: 0% 50%; }
.p5  { background-position: 66.66% 50%; }
.p6  { background-position: 0% 0%; }
.p7  { background-position: 66.66% 100%; }
.p8  { background-position: 100% 50%; }
.p9  { background-position: 100% 0%; }
.p10 { background-position: 100% 100%; }
.p11 { background-position: 66.66% 0%; }
.p12 { background-position: 33.33% 0%; }

// ---------------- FOOTER ----------------
.footer {
  grid-area: footer;
  background-color: $color-footer;
  color: $color-footer-text;
  @include flex-center(row, center, center);
  padding: $gap;
  position: sticky;
  bottom: 0;
  text-align: center;
  @include transition(all);

  &:hover {
    background: color.adjust($color-footer, $lightness: -5%);
  }

  a {
    color: $color-footer-text;
    text-decoration: none;
    @include transition(all);

    &:hover {
      color: $color-header;
      text-decoration: underline;
      text-shadow: 0 0 0.25rem rgba(0,0,0,0.8), 0 0 0.5rem rgba(0,0,0,0.6);
      transform: translateY(-0.15rem);
    }
  }
}

// ---------------- RESPONSIVE ----------------
@media (max-width: 48rem) { // tablette ~768px
  .grid {
    grid-template-columns: 1fr;
    grid-template-areas:
      "header"
      "content"
      "footer";
  }
  .menu { display: none; }
  .tiles .tile { flex: 1 1 calc(50% - #{$gap}); }
  .content { padding-bottom: $gap * 4; }
}

@media (max-width: 30rem) { // mobile ~480px
  .tiles .tile { flex: 1 1 calc(45% - #{$gap}); aspect-ratio: math.div(2,3); }
  .label { display: none; }
  .content { padding-bottom: $gap * 2; }
}
